<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
  <head>
    <title>Higher-Order XQuery Libraries</title>
    <link rel="stylesheet" type="text/css" href="../style.css" />
  </head>
  <body>
    <h2>Library Module: ordered_map/rbtree.xqm</h2>
    <table>
      <tr>
        <td>
          <b>URI:</b>
        </td>
        <td>
          <code>http://www.woerteler.de/xquery/modules/ordered-map/rbtree</code>
        </td>
      </tr>
      <tr>
        <td>
          <b>Description:</b>
        </td>
        <td>Implementation of an ordered map based on a Red-Black Tree.</td>
      </tr>
      <tr>
        <td>
          <b>Author:</b>
        </td>
        <td>Leo Woerteler &lt;leo@woerteler.de&gt;</td>
      </tr>
      <tr>
        <td>
          <b>Version:</b>
        </td>
        <td>0.1</td>
      </tr>
    </table>
    <h2>Functions</h2>
    <h3>check($lt, $tree, $min, $max, $msg)</h3>
    <table>
      <tr>
        <td>
          <b>Arguments:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>$lt</code>
              </td>
              <td>
                <code>item()*</code>
              </td>
              <td>less-than predicate</td>
            </tr>
            <tr>
              <td>
                <code>$tree</code>
              </td>
              <td>
                <code>item()*</code>
              </td>
              <td>current node</td>
            </tr>
            <tr>
              <td>
                <code>$min</code>
              </td>
              <td>
                <code>item()*</code>
              </td>
              <td>key that is smaller than all keys in <code>$tree</code>
              </td>
            </tr>
            <tr>
              <td>
                <code>$max</code>
              </td>
              <td>
                <code>item()*</code>
              </td>
              <td>key that is greater than all keys in <code>$tree</code>
              </td>
            </tr>
            <tr>
              <td>
                <code>$msg</code>
              </td>
              <td>
                <code>item()*</code>
              </td>
              <td>error message to show when an invariant is violated</td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Returns:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>item()*</code>
              </td>
              <td>black height of the tree</td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Annotations:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>%public</code>
              </td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Description:</b>
        </td>
        <td>Checks the given tree node for invariant violations.</td>
      </tr>
      <tr>
        <td>
          <b>Error:</b>
        </td>
        <td>rbtree:CHCK0001 if a key is smaller than <code>$min</code>
        </td>
      </tr>
      <tr>
        <td>
          <b>Error:</b>
        </td>
        <td>rbtree:CHCK0002 if a key is greater than <code>$max</code>
        </td>
      </tr>
      <tr>
        <td>
          <b>Error:</b>
        </td>
        <td>rbtree:CHCK0003 if a red node has a red child</td>
      </tr>
      <tr>
        <td>
          <b>Error:</b>
        </td>
        <td>rbtree:CHCK0004 if a node is double-black or negative black</td>
      </tr>
      <tr>
        <td>
          <b>Error:</b>
        </td>
        <td>rbtree:CHCK0005 if the two sub-trees have different black heights</td>
      </tr>
    </table>
    <h3>delete($lt, $root, $k)</h3>
    <table>
      <tr>
        <td>
          <b>Arguments:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>$lt</code>
              </td>
              <td>
                <code>item()*</code>
              </td>
              <td>less-than predicate</td>
            </tr>
            <tr>
              <td>
                <code>$root</code>
              </td>
              <td>
                <code>item()*</code>
              </td>
              <td>root node of the tree</td>
            </tr>
            <tr>
              <td>
                <code>$k</code>
              </td>
              <td>
                <code>item()*</code>
              </td>
              <td>key to delete</td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Returns:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>item()*</code>
              </td>
              <td>tree where the entry of <code>$k</code> was deleted</td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Annotations:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>%public</code>
              </td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Description:</b>
        </td>
        <td>Deletes the given key from the given Red-Black Tree.</td>
      </tr>
    </table>
    <h3>empty()</h3>
    <table>
      <tr>
        <td>
          <b>Returns:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>item()*</code>
              </td>
              <td>the empty tree</td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Annotations:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>%public</code>
              </td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Description:</b>
        </td>
        <td>The empty Red-Black Tree, which is a black leaf.</td>
      </tr>
    </table>
    <h3>fold($node, $acc1, $f)</h3>
    <table>
      <tr>
        <td>
          <b>Arguments:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>$node</code>
              </td>
              <td>
                <code>item()*</code>
              </td>
              <td>current tree node</td>
            </tr>
            <tr>
              <td>
                <code>$acc1</code>
              </td>
              <td>
                <code>item()*</code>
              </td>
              <td>accumulator</td>
            </tr>
            <tr>
              <td>
                <code>$f</code>
              </td>
              <td>
                <code>item()*</code>
              </td>
              <td>combining function</td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Returns:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>item()*</code>
              </td>
              <td>folded value</td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Annotations:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>%public</code>
              </td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Description:</b>
        </td>
        <td>Folds all entries of the given tree into one value in ascending order.</td>
      </tr>
    </table>
    <h3>insert($lt, $root, $k, $v)</h3>
    <table>
      <tr>
        <td>
          <b>Arguments:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>$lt</code>
              </td>
              <td>
                <code>item()*</code>
              </td>
              <td>less-than predicate</td>
            </tr>
            <tr>
              <td>
                <code>$root</code>
              </td>
              <td>
                <code>item()*</code>
              </td>
              <td>root node of the tree</td>
            </tr>
            <tr>
              <td>
                <code>$k</code>
              </td>
              <td>
                <code>item()*</code>
              </td>
              <td>key of the entry to insert</td>
            </tr>
            <tr>
              <td>
                <code>$v</code>
              </td>
              <td>
                <code>item()*</code>
              </td>
              <td>value of the entry to insert</td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Returns:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>item()*</code>
              </td>
              <td>tree where the entry was inserted</td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Annotations:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>%public</code>
              </td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Description:</b>
        </td>
        <td>Inserts the given entry into the given Read-Black Tree.</td>
      </tr>
    </table>
    <h3>lookup($lt, $tree, $x, $found, $notFound)</h3>
    <table>
      <tr>
        <td>
          <b>Arguments:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>$lt</code>
              </td>
              <td>
                <code>item()*</code>
              </td>
              <td>less-than predicate</td>
            </tr>
            <tr>
              <td>
                <code>$tree</code>
              </td>
              <td>
                <code>item()*</code>
              </td>
              <td>Red-Black Tree</td>
            </tr>
            <tr>
              <td>
                <code>$x</code>
              </td>
              <td>
                <code>item()*</code>
              </td>
              <td>key to look for</td>
            </tr>
            <tr>
              <td>
                <code>$found</code>
              </td>
              <td>
                <code>item()*</code>
              </td>
              <td>callback taking the bound value when the key was found</td>
            </tr>
            <tr>
              <td>
                <code>$notFound</code>
              </td>
              <td>
                <code>item()*</code>
              </td>
              <td></td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Returns:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>item()*</code>
              </td>
              <td>result of the callback</td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Annotations:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>%public</code>
              </td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Description:</b>
        </td>
        <td>Searches for the given key in the given Red-Black Tree.</td>
      </tr>
    </table>
    <h3>size($tree)</h3>
    <table>
      <tr>
        <td>
          <b>Arguments:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>$tree</code>
              </td>
              <td>
                <code>item()*</code>
              </td>
              <td>Red-Black Tree</td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Returns:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>item()*</code>
              </td>
              <td>number of entries in the tree</td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Annotations:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>%public</code>
              </td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Description:</b>
        </td>
        <td>Calculates the number of entries in the given Red-Black Tree.</td>
      </tr>
    </table>
    <h3>to-xml($tree)</h3>
    <table>
      <tr>
        <td>
          <b>Arguments:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>$tree</code>
              </td>
              <td>
                <code>item()*</code>
              </td>
              <td>tree to show the structure of</td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Returns:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>item()*</code>
              </td>
              <td>the tree's structure</td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Annotations:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>%public</code>
              </td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Description:</b>
        </td>
        <td>Returns an XML representation of the given tree's inner structure.</td>
      </tr>
    </table>
  </body>
</html>